import { DynamicEnvironment } from './dynamic-environment';
/**
 * Custom bootstrapper. Fetches a config JSON file from provided url, parses it and sets it as dynamic environment before
 * bootstrapping provided module.
 * Optionally, custom platform can be provided. platformBrowserDynamic is used by default.
 */
export class SentinelBootstrapper {
    static bootstrap(url, moduleType, platform, compilerOptions) {
        return fetch(url)
            .then((response) => response.json())
            .then((config) => {
            DynamicEnvironment.setConfig(config);
            return platform.bootstrapModule(moduleType, compilerOptions).catch((err) => {
                console.error(err);
                throw new Error(err);
            });
        })
            .catch((err) => {
            console.error(err);
            throw new Error(err);
        });
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VudGluZWwtYm9vdHN0cmFwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vcHJvamVjdHMvc2VudGluZWwtY29tbW9uL2R5bmFtaWMtZW52L3NyYy9zZW50aW5lbC1ib290c3RyYXAudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFJM0Q7Ozs7R0FJRztBQUNILE1BQU0sT0FBTyxvQkFBb0I7SUFDL0IsTUFBTSxDQUFDLFNBQVMsQ0FDZCxHQUFXLEVBQ1gsVUFBbUIsRUFDbkIsUUFBcUIsRUFDckIsZUFBa0c7UUFFbEcsT0FBTyxLQUFLLENBQUMsR0FBRyxDQUFDO2FBQ2QsSUFBSSxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUM7YUFDbkMsSUFBSSxDQUFDLENBQUMsTUFBUyxFQUFFLEVBQUU7WUFDbEIsa0JBQWtCLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3JDLE9BQU8sUUFBUSxDQUFDLGVBQWUsQ0FBQyxVQUFVLEVBQUUsZUFBZSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUU7Z0JBQ3pFLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQ25CLE1BQU0sSUFBSSxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDdkIsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUM7YUFDRCxLQUFLLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRTtZQUNiLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDbkIsTUFBTSxJQUFJLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN2QixDQUFDLENBQUMsQ0FBQztJQUNQLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IER5bmFtaWNFbnZpcm9ubWVudCB9IGZyb20gJy4vZHluYW1pYy1lbnZpcm9ubWVudCc7XG5pbXBvcnQgeyBTZW50aW5lbENvbmZpZyB9IGZyb20gJy4vc2VudGluZWwtY29uZmlnJztcbmltcG9ydCB7IEJvb3RzdHJhcE9wdGlvbnMsIENvbXBpbGVyT3B0aW9ucywgTmdNb2R1bGVSZWYsIFBsYXRmb3JtUmVmLCBUeXBlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbi8qKlxuICogQ3VzdG9tIGJvb3RzdHJhcHBlci4gRmV0Y2hlcyBhIGNvbmZpZyBKU09OIGZpbGUgZnJvbSBwcm92aWRlZCB1cmwsIHBhcnNlcyBpdCBhbmQgc2V0cyBpdCBhcyBkeW5hbWljIGVudmlyb25tZW50IGJlZm9yZVxuICogYm9vdHN0cmFwcGluZyBwcm92aWRlZCBtb2R1bGUuXG4gKiBPcHRpb25hbGx5LCBjdXN0b20gcGxhdGZvcm0gY2FuIGJlIHByb3ZpZGVkLiBwbGF0Zm9ybUJyb3dzZXJEeW5hbWljIGlzIHVzZWQgYnkgZGVmYXVsdC5cbiAqL1xuZXhwb3J0IGNsYXNzIFNlbnRpbmVsQm9vdHN0cmFwcGVyIHtcbiAgc3RhdGljIGJvb3RzdHJhcDxULCBVIGV4dGVuZHMgU2VudGluZWxDb25maWc+KFxuICAgIHVybDogc3RyaW5nLFxuICAgIG1vZHVsZVR5cGU6IFR5cGU8VD4sXG4gICAgcGxhdGZvcm06IFBsYXRmb3JtUmVmLFxuICAgIGNvbXBpbGVyT3B0aW9ucz86IChDb21waWxlck9wdGlvbnMgJiBCb290c3RyYXBPcHRpb25zKSB8IEFycmF5PENvbXBpbGVyT3B0aW9ucyAmIEJvb3RzdHJhcE9wdGlvbnM+LFxuICApOiBQcm9taXNlPE5nTW9kdWxlUmVmPFQ+PiB7XG4gICAgcmV0dXJuIGZldGNoKHVybClcbiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UuanNvbigpKVxuICAgICAgLnRoZW4oKGNvbmZpZzogVSkgPT4ge1xuICAgICAgICBEeW5hbWljRW52aXJvbm1lbnQuc2V0Q29uZmlnKGNvbmZpZyk7XG4gICAgICAgIHJldHVybiBwbGF0Zm9ybS5ib290c3RyYXBNb2R1bGUobW9kdWxlVHlwZSwgY29tcGlsZXJPcHRpb25zKS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnIpO1xuICAgICAgICB9KTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnIpO1xuICAgICAgfSk7XG4gIH1cbn1cbiJdfQ==