import { of } from 'rxjs';
import { concatMap, tap } from 'rxjs/operators';
import { EntityModifyBaseService } from './entity-modify-base.service';
export class EditEntityService extends EntityModifyBaseService {
    constructor(entityName, notificationService) {
        super(entityName, notificationService);
        this.notificationService = notificationService;
    }
    save() {
        return this.form$.pipe(concatMap((form) => (form.valid ? this.validFormSave(form) : of(false))));
    }
    createSuccessSaveMessage() {
        return `${this.entityName} was updated`;
    }
    createErrorSaveMessage() {
        const lowerCasedEntity = this.entityName.toLowerCase();
        return `Updating ${lowerCasedEntity}`;
    }
    validFormSave(form) {
        this.isSavingSubject$.next(true);
        return this.updateEntity(form).pipe(concatMap((result) => this.handleSaveResult(form, result)), tap({
            next: () => this.isSavingSubject$.next(false),
            error: () => this.isSavingSubject$.next(false),
        }));
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZWRpdC1lbnRpdHkuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3NlbnRpbmVsLWNvbW1vbi9hcG9sbG8tc2VydmljZXMvc3JjL2VudGl0eS1tb2RpZnkvZWRpdC1lbnRpdHkuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSxPQUFPLEVBQWMsRUFBRSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ3RDLE9BQU8sRUFBRSxTQUFTLEVBQUUsR0FBRyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDaEQsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFJdkUsTUFBTSxPQUFnQixpQkFLcEIsU0FBUSx1QkFBd0M7SUFHaEQsWUFDRSxVQUFrQixFQUNSLG1CQUE0QztRQUV0RCxLQUFLLENBQUMsVUFBVSxFQUFFLG1CQUFtQixDQUFDLENBQUM7UUFGN0Isd0JBQW1CLEdBQW5CLG1CQUFtQixDQUF5QjtJQUd4RCxDQUFDO0lBSUQsSUFBSTtRQUNGLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNuRyxDQUFDO0lBRVMsd0JBQXdCO1FBQ2hDLE9BQU8sR0FBRyxJQUFJLENBQUMsVUFBVSxjQUFjLENBQUM7SUFDMUMsQ0FBQztJQUVTLHNCQUFzQjtRQUM5QixNQUFNLGdCQUFnQixHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDdkQsT0FBTyxZQUFZLGdCQUFnQixFQUFFLENBQUM7SUFDeEMsQ0FBQztJQUVPLGFBQWEsQ0FBQyxJQUFVO1FBQzlCLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDakMsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FDakMsU0FBUyxDQUFDLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDLEVBQzFELEdBQUcsQ0FBQztZQUNGLElBQUksRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztZQUM3QyxLQUFLLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7U0FDL0MsQ0FBQyxDQUNILENBQUM7SUFDSixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlUmVhY3RpdmVGb3JtIH0gZnJvbSAnQHNlbnRpbmVsL2NvbW1vbic7XG5pbXBvcnQgeyBBcG9sbG9SZXN1bHQgfSBmcm9tICdAc2VudGluZWwvY29tbW9uL2dyYXBocWwnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgb2YgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IGNvbmNhdE1hcCwgdGFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgRW50aXR5TW9kaWZ5QmFzZVNlcnZpY2UgfSBmcm9tICcuL2VudGl0eS1tb2RpZnktYmFzZS5zZXJ2aWNlJztcbmltcG9ydCB7IE5vdGlmaWNhdGlvblNlcnZpY2VCYXNlIH0gZnJvbSAnLi9ub3RpZmljYXRpb24tc2VydmljZS5iYXNlJztcbmltcG9ydCB7IEFic3RyYWN0Q29udHJvbCB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEVkaXRFbnRpdHlTZXJ2aWNlPFxuICBGb3JtTW9kZWwgZXh0ZW5kcyB7XG4gICAgW0sgaW4ga2V5b2YgRm9ybU1vZGVsXTogQWJzdHJhY3RDb250cm9sPHVua25vd24+O1xuICB9LFxuICBGb3JtIGV4dGVuZHMgQmFzZVJlYWN0aXZlRm9ybTxGb3JtTW9kZWw+LFxuPiBleHRlbmRzIEVudGl0eU1vZGlmeUJhc2VTZXJ2aWNlPEZvcm1Nb2RlbCwgRm9ybT4ge1xuICBwcm90ZWN0ZWQgZW50aXR5SWQ/OiBzdHJpbmc7XG5cbiAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKFxuICAgIGVudGl0eU5hbWU6IHN0cmluZyxcbiAgICBwcm90ZWN0ZWQgbm90aWZpY2F0aW9uU2VydmljZTogTm90aWZpY2F0aW9uU2VydmljZUJhc2UsXG4gICkge1xuICAgIHN1cGVyKGVudGl0eU5hbWUsIG5vdGlmaWNhdGlvblNlcnZpY2UpO1xuICB9XG5cbiAgcHJvdGVjdGVkIGFic3RyYWN0IHVwZGF0ZUVudGl0eShmb3JtOiBGb3JtKTogT2JzZXJ2YWJsZTxBcG9sbG9SZXN1bHQ+O1xuXG4gIHNhdmUoKTogT2JzZXJ2YWJsZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIHRoaXMuZm9ybSQucGlwZShjb25jYXRNYXAoKGZvcm0pID0+IChmb3JtLnZhbGlkID8gdGhpcy52YWxpZEZvcm1TYXZlKGZvcm0pIDogb2YoZmFsc2UpKSkpO1xuICB9XG5cbiAgcHJvdGVjdGVkIGNyZWF0ZVN1Y2Nlc3NTYXZlTWVzc2FnZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHt0aGlzLmVudGl0eU5hbWV9IHdhcyB1cGRhdGVkYDtcbiAgfVxuXG4gIHByb3RlY3RlZCBjcmVhdGVFcnJvclNhdmVNZXNzYWdlKCk6IHN0cmluZyB7XG4gICAgY29uc3QgbG93ZXJDYXNlZEVudGl0eSA9IHRoaXMuZW50aXR5TmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIHJldHVybiBgVXBkYXRpbmcgJHtsb3dlckNhc2VkRW50aXR5fWA7XG4gIH1cblxuICBwcml2YXRlIHZhbGlkRm9ybVNhdmUoZm9ybTogRm9ybSk6IE9ic2VydmFibGU8Ym9vbGVhbj4ge1xuICAgIHRoaXMuaXNTYXZpbmdTdWJqZWN0JC5uZXh0KHRydWUpO1xuICAgIHJldHVybiB0aGlzLnVwZGF0ZUVudGl0eShmb3JtKS5waXBlKFxuICAgICAgY29uY2F0TWFwKChyZXN1bHQpID0+IHRoaXMuaGFuZGxlU2F2ZVJlc3VsdChmb3JtLCByZXN1bHQpKSxcbiAgICAgIHRhcCh7XG4gICAgICAgIG5leHQ6ICgpID0+IHRoaXMuaXNTYXZpbmdTdWJqZWN0JC5uZXh0KGZhbHNlKSxcbiAgICAgICAgZXJyb3I6ICgpID0+IHRoaXMuaXNTYXZpbmdTdWJqZWN0JC5uZXh0KGZhbHNlKSxcbiAgICAgIH0pLFxuICAgICk7XG4gIH1cbn1cbiJdfQ==