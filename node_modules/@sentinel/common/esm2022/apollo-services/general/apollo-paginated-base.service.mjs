import { ApolloQueryService } from './apollo-query.service';
import { PaginatedResource } from '@sentinel/common/pagination';
export class ApolloPaginatedBaseService extends ApolloQueryService {
    constructor(getQuery, operationName, options) {
        super(getQuery, operationName, options);
        this.getQuery = getQuery;
        this.lastPaginationEvent = this.createInitialPaginationEvent();
    }
    update(event) {
        super.update(event);
        this.lastPaginationEvent = event.pagination;
    }
    toData(result) {
        const entities = this.toFragments(result.data);
        const pagination = this.createPaginationFromQueryResult(result);
        return new PaginatedResource(entities, pagination);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBvbGxvLXBhZ2luYXRlZC1iYXNlLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9zZW50aW5lbC1jb21tb24vYXBvbGxvLXNlcnZpY2VzL3NyYy9nZW5lcmFsL2Fwb2xsby1wYWdpbmF0ZWQtYmFzZS5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE9BQU8sRUFBRSxrQkFBa0IsRUFBNkIsTUFBTSx3QkFBd0IsQ0FBQztBQUN2RixPQUFPLEVBQXFELGlCQUFpQixFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFPbkgsTUFBTSxPQUFnQiwwQkFNcEIsU0FBUSxrQkFBd0Y7SUFHaEcsWUFDUyxRQUE2QyxFQUNwRCxhQUFxQixFQUNyQixPQUFtQztRQUVuQyxLQUFLLENBQUMsUUFBUSxFQUFFLGFBQWEsRUFBRSxPQUFPLENBQUMsQ0FBQztRQUpqQyxhQUFRLEdBQVIsUUFBUSxDQUFxQztRQUtwRCxJQUFJLENBQUMsbUJBQW1CLEdBQUcsSUFBSSxDQUFDLDRCQUE0QixFQUFFLENBQUM7SUFDakUsQ0FBQztJQWdCRCxNQUFNLENBQUMsS0FBc0I7UUFDM0IsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNwQixJQUFJLENBQUMsbUJBQW1CLEdBQUcsS0FBSyxDQUFDLFVBQVUsQ0FBQztJQUM5QyxDQUFDO0lBRVMsTUFBTSxDQUFDLE1BQWdDO1FBQy9DLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQy9DLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQywrQkFBK0IsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNoRSxPQUFPLElBQUksaUJBQWlCLENBQVcsUUFBUSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBQy9ELENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwb2xsb1F1ZXJ5UmVzdWx0IH0gZnJvbSAnQGFwb2xsby9jbGllbnQvY29yZSc7XG5pbXBvcnQgKiBhcyBBcG9sbG8gZnJvbSAnYXBvbGxvLWFuZ3VsYXInO1xuaW1wb3J0IHsgQXBvbGxvUXVlcnlTZXJ2aWNlLCBBcG9sbG9RdWVyeVNlcnZpY2VPcHRpb25zIH0gZnJvbSAnLi9hcG9sbG8tcXVlcnkuc2VydmljZSc7XG5pbXBvcnQgeyBJUGFnaW5hdGVkRWxlbWVudHMsIElQYWdpbmF0aW9uLCBJUGFnaW5hdGlvbkV2ZW50LCBQYWdpbmF0ZWRSZXNvdXJjZSB9IGZyb20gJ0BzZW50aW5lbC9jb21tb24vcGFnaW5hdGlvbic7XG5pbXBvcnQgeyBEbXRCYXNlUXVlcnlPcmRlciwgUGFnaW5hdGVkRGF0YSwgUGFnaW5hdGlvblF1ZXJ5IH0gZnJvbSAnQHNlbnRpbmVsL2NvbW1vbi9ncmFwaHFsJztcbmltcG9ydCB7IE9wdGlvbmFsIH0gZnJvbSAnQHNlbnRpbmVsL2NvbW1vbi91dGlscyc7XG5pbXBvcnQgeyBPcGVyYXRpb25WYXJpYWJsZXMgfSBmcm9tICdAYXBvbGxvL2NsaWVudC9jb3JlL3R5cGVzJztcblxuZXhwb3J0IHR5cGUgQXBvbGxvUGFnaW5hdGVkSW5wdXRWYXJpYWJsZXMgPSB7IHBhZ2luYXRpb246IElQYWdpbmF0aW9uRXZlbnQgfTtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFwb2xsb1BhZ2luYXRlZEJhc2VTZXJ2aWNlPFxuICBRdWVyeSxcbiAgUXVlcnlWYXJpYWJsZXMgZXh0ZW5kcyBPcGVyYXRpb25WYXJpYWJsZXMsXG4gIEZyYWdtZW50LFxuICBPcmRlcmFibGVCeSxcbiAgVXBkYXRlVmFyaWFibGVzIGV4dGVuZHMgQXBvbGxvUGFnaW5hdGVkSW5wdXRWYXJpYWJsZXMgPSBBcG9sbG9QYWdpbmF0ZWRJbnB1dFZhcmlhYmxlcyxcbj4gZXh0ZW5kcyBBcG9sbG9RdWVyeVNlcnZpY2U8UXVlcnksIFF1ZXJ5VmFyaWFibGVzLCBJUGFnaW5hdGVkRWxlbWVudHM8RnJhZ21lbnQ+LCBVcGRhdGVWYXJpYWJsZXM+IHtcbiAgcHJvdGVjdGVkIGxhc3RQYWdpbmF0aW9uRXZlbnQ6IElQYWdpbmF0aW9uRXZlbnQ7XG5cbiAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBnZXRRdWVyeTogQXBvbGxvLlF1ZXJ5PFF1ZXJ5LCBRdWVyeVZhcmlhYmxlcz4sXG4gICAgb3BlcmF0aW9uTmFtZTogc3RyaW5nLFxuICAgIG9wdGlvbnM/OiBBcG9sbG9RdWVyeVNlcnZpY2VPcHRpb25zLFxuICApIHtcbiAgICBzdXBlcihnZXRRdWVyeSwgb3BlcmF0aW9uTmFtZSwgb3B0aW9ucyk7XG4gICAgdGhpcy5sYXN0UGFnaW5hdGlvbkV2ZW50ID0gdGhpcy5jcmVhdGVJbml0aWFsUGFnaW5hdGlvbkV2ZW50KCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgYWJzdHJhY3Qgc3RyVG9PcmRlcmFibGUoc29ydDogc3RyaW5nKTogT3B0aW9uYWw8T3JkZXJhYmxlQnk+O1xuXG4gIHByb3RlY3RlZCBhYnN0cmFjdCBjcmVhdGVJbml0aWFsUGFnaW5hdGlvbkV2ZW50KCk6IElQYWdpbmF0aW9uRXZlbnQ7XG5cbiAgcHJvdGVjdGVkIGFic3RyYWN0IHF1ZXJ5VG9QYWdpbmF0aW9uRGF0YShxdWVyeTogUXVlcnkpOiBQYWdpbmF0ZWREYXRhO1xuXG4gIHByb3RlY3RlZCBhYnN0cmFjdCB0b0ZyYWdtZW50cyhxdWVyeTogUXVlcnkpOiBGcmFnbWVudFtdO1xuXG4gIHByb3RlY3RlZCBhYnN0cmFjdCBjcmVhdGVQYWdpbmF0aW9uVmFyaWFibGVzKHBhZ2luYXRpb25FdmVudDogSVBhZ2luYXRpb25FdmVudCk6IFBhZ2luYXRpb25RdWVyeTtcblxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgY3JlYXRlT3JkZXJWYXJpYWJsZXMoc29ydDogc3RyaW5nLCBkaXI6IHN0cmluZyk6IERtdEJhc2VRdWVyeU9yZGVyPE9yZGVyYWJsZUJ5PjtcblxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgY3JlYXRlUGFnaW5hdGlvbkZyb21RdWVyeVJlc3VsdChyZXN1bHQ6IEFwb2xsb1F1ZXJ5UmVzdWx0PFF1ZXJ5Pik6IElQYWdpbmF0aW9uO1xuXG4gIHVwZGF0ZShldmVudDogVXBkYXRlVmFyaWFibGVzKTogdm9pZCB7XG4gICAgc3VwZXIudXBkYXRlKGV2ZW50KTtcbiAgICB0aGlzLmxhc3RQYWdpbmF0aW9uRXZlbnQgPSBldmVudC5wYWdpbmF0aW9uO1xuICB9XG5cbiAgcHJvdGVjdGVkIHRvRGF0YShyZXN1bHQ6IEFwb2xsb1F1ZXJ5UmVzdWx0PFF1ZXJ5Pik6IElQYWdpbmF0ZWRFbGVtZW50czxGcmFnbWVudD4ge1xuICAgIGNvbnN0IGVudGl0aWVzID0gdGhpcy50b0ZyYWdtZW50cyhyZXN1bHQuZGF0YSk7XG4gICAgY29uc3QgcGFnaW5hdGlvbiA9IHRoaXMuY3JlYXRlUGFnaW5hdGlvbkZyb21RdWVyeVJlc3VsdChyZXN1bHQpO1xuICAgIHJldHVybiBuZXcgUGFnaW5hdGVkUmVzb3VyY2U8RnJhZ21lbnQ+KGVudGl0aWVzLCBwYWdpbmF0aW9uKTtcbiAgfVxufVxuIl19