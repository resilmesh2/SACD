import { Inject, Injectable, Optional } from '@angular/core';
import equal from 'fast-deep-equal/es6';
import { BehaviorSubject } from 'rxjs';
import { distinctUntilChanged, shareReplay } from 'rxjs/operators';
import { INIT_SORT_TOKEN } from './order-token';
import * as i0 from "@angular/core";
export class SortService {
    constructor(initSort) {
        this.initSort = initSort;
        this.INIT_SORT = initSort ? initSort : { sort: undefined, sortDir: undefined };
        this.sortSubject$ = new BehaviorSubject(this.INIT_SORT);
        this.sort$ = this.sortSubject$.asObservable().pipe(distinctUntilChanged((prev, curr) => equal(prev, curr)), shareReplay({ refCount: true }));
    }
    get() {
        return this.sortSubject$.getValue();
    }
    update(sort) {
        this.sortSubject$.next({ ...sort });
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.0.0", ngImport: i0, type: SortService, deps: [{ token: INIT_SORT_TOKEN, optional: true }], target: i0.ɵɵFactoryTarget.Injectable }); }
    static { this.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "18.0.0", ngImport: i0, type: SortService }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.0.0", ngImport: i0, type: SortService, decorators: [{
            type: Injectable
        }], ctorParameters: () => [{ type: undefined, decorators: [{
                    type: Optional
                }, {
                    type: Inject,
                    args: [INIT_SORT_TOKEN]
                }] }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29ydC5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vcHJvamVjdHMvc2VudGluZWwtY29tbW9uL3NvcnQtc2VydmljZXMvc3JjL3NvcnQuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDN0QsT0FBTyxLQUFLLE1BQU0scUJBQXFCLENBQUM7QUFDeEMsT0FBTyxFQUFFLGVBQWUsRUFBYyxNQUFNLE1BQU0sQ0FBQztBQUNuRCxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsV0FBVyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDbkUsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLGVBQWUsQ0FBQzs7QUFJaEQsTUFBTSxPQUFPLFdBQVc7SUFLdEIsWUFBb0UsUUFBb0I7UUFBcEIsYUFBUSxHQUFSLFFBQVEsQ0FBWTtRQUN0RixJQUFJLENBQUMsU0FBUyxHQUFHLFFBQVEsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBRSxDQUFDO1FBQy9FLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxlQUFlLENBQVksSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBRW5FLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxZQUFZLEVBQUUsQ0FBQyxJQUFJLENBQ2hELG9CQUFvQixDQUFDLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxFQUN2RCxXQUFXLENBQUMsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FDaEMsQ0FBQztJQUNKLENBQUM7SUFFRCxHQUFHO1FBQ0QsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBQ3RDLENBQUM7SUFFRCxNQUFNLENBQUMsSUFBZTtRQUNwQixJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsSUFBSSxFQUFFLENBQUMsQ0FBQztJQUN0QyxDQUFDOzhHQXJCVSxXQUFXLGtCQUtVLGVBQWU7a0hBTHBDLFdBQVc7OzJGQUFYLFdBQVc7a0JBRHZCLFVBQVU7OzBCQU1JLFFBQVE7OzBCQUFJLE1BQU07MkJBQUMsZUFBZSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdCwgSW5qZWN0YWJsZSwgT3B0aW9uYWwgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCBlcXVhbCBmcm9tICdmYXN0LWRlZXAtZXF1YWwvZXM2JztcbmltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCwgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgZGlzdGluY3RVbnRpbENoYW5nZWQsIHNoYXJlUmVwbGF5IH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgSU5JVF9TT1JUX1RPS0VOIH0gZnJvbSAnLi9vcmRlci10b2tlbic7XG5pbXBvcnQgeyBTb3J0RXZlbnQgfSBmcm9tICcuL3NvcnQtZXZlbnQnO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgU29ydFNlcnZpY2Uge1xuICByZWFkb25seSBJTklUX1NPUlQ6IFNvcnRFdmVudDtcbiAgcHJvdGVjdGVkIHNvcnRTdWJqZWN0JDogQmVoYXZpb3JTdWJqZWN0PFNvcnRFdmVudD47XG4gIHNvcnQkOiBPYnNlcnZhYmxlPFNvcnRFdmVudD47XG5cbiAgY29uc3RydWN0b3IoQE9wdGlvbmFsKCkgQEluamVjdChJTklUX1NPUlRfVE9LRU4pIHByb3RlY3RlZCByZWFkb25seSBpbml0U29ydD86IFNvcnRFdmVudCkge1xuICAgIHRoaXMuSU5JVF9TT1JUID0gaW5pdFNvcnQgPyBpbml0U29ydCA6IHsgc29ydDogdW5kZWZpbmVkLCBzb3J0RGlyOiB1bmRlZmluZWQgfTtcbiAgICB0aGlzLnNvcnRTdWJqZWN0JCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8U29ydEV2ZW50Pih0aGlzLklOSVRfU09SVCk7XG5cbiAgICB0aGlzLnNvcnQkID0gdGhpcy5zb3J0U3ViamVjdCQuYXNPYnNlcnZhYmxlKCkucGlwZShcbiAgICAgIGRpc3RpbmN0VW50aWxDaGFuZ2VkKChwcmV2LCBjdXJyKSA9PiBlcXVhbChwcmV2LCBjdXJyKSksXG4gICAgICBzaGFyZVJlcGxheSh7IHJlZkNvdW50OiB0cnVlIH0pLFxuICAgICk7XG4gIH1cblxuICBnZXQoKTogU29ydEV2ZW50IHtcbiAgICByZXR1cm4gdGhpcy5zb3J0U3ViamVjdCQuZ2V0VmFsdWUoKTtcbiAgfVxuXG4gIHVwZGF0ZShzb3J0OiBTb3J0RXZlbnQpIHtcbiAgICB0aGlzLnNvcnRTdWJqZWN0JC5uZXh0KHsgLi4uc29ydCB9KTtcbiAgfVxufVxuIl19