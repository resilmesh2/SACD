{"version":3,"file":"sentinel-common-utils.mjs","sources":["../../../projects/sentinel-common/utils/src/types.ts","../../../projects/sentinel-common/utils/src/utils.ts","../../../projects/sentinel-common/utils/src/query-params-navigation-queue.service.ts","../../../projects/sentinel-common/utils/src/sentinel-common-utils.ts"],"sourcesContent":["export type Optional<T> = T | undefined;\nexport type Nullable<T> = T | null;\nexport type Maybe<T> = T | undefined | null;\n\nexport type PartialPick<T, K extends keyof T> = {\n  [P in K]?: T[P] | null;\n};\n\nexport type PatchEvent<T, K extends keyof T> = {\n  set?: PartialPick<T, K>;\n  remove?: PartialPick<T, K>;\n};\n\nexport type EntityLoadingState =\n  | { isLoading: true; ids: string[] }\n  | { isLoading: true; id: string }\n  | { isLoading: false };\nexport const ENTITY_NOT_LOADING_STATE: EntityLoadingState = { isLoading: false };\n\nexport type NotificationType = 'error' | 'info' | 'warning' | 'success';\n\nexport type NullableProps<Type> = {\n  [Property in keyof Type]: Nullable<Type[Property]>;\n};\n\ntype Diff<T, U> = T extends U ? never : T; // Remove types from T that are assignable to U\n\n// Names of properties in T with types that include undefined\nexport type OptionalPropertyNames<T> = { [K in keyof T]: undefined extends T[K] ? K : never }[keyof T];\n\n// Common properties from L and R with undefined in R[K] replaced by type in L[K]\nexport type SpreadProperties<L, R, K extends keyof L & keyof R> = { [P in K]: L[P] | Diff<R[P], undefined> };\n\n// Type of { ...L, ...R }\nexport type Spread<L, R> =\n  // Properties in L that don't exist in R\n  Pick<L, Diff<keyof L, keyof R>> &\n    // Properties in R with types that exclude undefined\n    Pick<R, Diff<keyof R, OptionalPropertyNames<R>>> &\n    // Properties in R, with types that include undefined, that don't exist in L\n    Pick<R, Diff<OptionalPropertyNames<R>, keyof L>> &\n    // Properties in R, with types that include undefined, that exist in L\n    SpreadProperties<L, R, OptionalPropertyNames<R> & keyof L>;\n","import { Params } from '@angular/router';\nimport { EntityLoadingState, Maybe, Optional } from './types';\nimport { Identifiable } from '@sentinel/common/entity';\n\nexport type maybeArray<T> = T | T[];\n\nexport function isArray<T>(x: maybeArray<T>): x is T[] {\n  return Array.isArray(x);\n}\n\nexport function hasValue<T>(value: Maybe<T>): boolean {\n  return value !== undefined && value !== null;\n}\n\nexport function propertyOf<TObj>(name: keyof TObj): string {\n  return name.toString();\n}\n\nexport function trackById(index: number, item: Identifiable): string | number {\n  return item.id;\n}\n\nexport function trackByIndex(index: number): number {\n  return index;\n}\n\nexport interface NgStyleArg {\n  [klass: string]: unknown;\n}\n\n/**\n * Tries to match string value to one of the keys of enum. Returns undefined if it fails to match\n */\nexport const enumFromValue = <T extends Record<string, string>>(enumObj: T, val: string): T[keyof T] | undefined => {\n  const enumName = (Object.keys(enumObj) as Array<keyof T>).find((k) => enumObj[k] === val);\n  return !enumName ? undefined : enumObj[enumName];\n};\n\nexport function toQueryParams<InputData extends object>(inputObject: InputData): Params {\n  const params: Params = {};\n  const entries = Object.entries(inputObject);\n  entries.forEach((entry) => (params[entry[0]] = entry[1]));\n  return params;\n}\n\nexport function isLoading(state: EntityLoadingState, id: string): boolean {\n  if ('id' in state) {\n    return state.isLoading && id === state.id;\n  }\n  if ('ids' in state) {\n    return state.isLoading && state.ids.includes(id);\n  }\n  return false;\n}\n\nexport function prettifyEnum(value?: string): string {\n  if (value) {\n    const lowercased = value.toLowerCase();\n    const splitWords = lowercased.split('_');\n    for (let i = 0; i < splitWords.length; i++) {\n      splitWords[i] = splitWords[i].charAt(0).toUpperCase() + splitWords[i].slice(1);\n    }\n    return splitWords.join(' ');\n  } else {\n    return '';\n  }\n}\n\nexport function slugify(value: string | undefined | null): Optional<string> {\n  if (value === null || value === undefined) {\n    return undefined;\n  } else {\n    return encodeURIComponent(value);\n  }\n}\n\nexport function slugifyDate(value: Date): number {\n  return value.valueOf();\n}\n\nexport function deslugify(value: string | undefined | null): Optional<string> {\n  if (value === null || value === undefined) {\n    return undefined;\n  } else {\n    return decodeURIComponent(value);\n  }\n}\n\nexport function deslugifyTimestamp(value: string | undefined | null): Optional<Date> {\n  if (value === null || value === undefined) {\n    return undefined;\n  } else {\n    const deslugified = deslugify(value);\n    if (deslugified) {\n      const timestamp = Number.parseInt(deslugified);\n      if (!Number.isNaN(timestamp)) {\n        return new Date(timestamp);\n      }\n    }\n    return undefined;\n  }\n}\n\nexport function isDate(value: unknown): value is Date {\n  return (\n    value instanceof Date || (typeof value === 'object' && Object.prototype.toString.call(value) === '[object Date]')\n  );\n}\n","import { Params, Router } from '@angular/router';\nimport { inject, Injectable } from '@angular/core';\n\n@Injectable()\nexport class QueryParamsNavigationQueueService {\n  private queue: Promise<boolean> = Promise.resolve(true);\n  private readonly router: Router = inject(Router);\n  enqueue(queryParams: Params): Promise<boolean> {\n    const enqueue = async () => {\n      try {\n        await this.queue;\n      } catch (error) {\n        console.error(error);\n      }\n      return await this.router.navigate([], {\n        queryParams: queryParams,\n        queryParamsHandling: 'merge',\n        replaceUrl: true,\n      });\n    };\n    this.queue = enqueue();\n    return this.queue;\n  }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":"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"}