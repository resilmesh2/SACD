{"version":3,"file":"sentinel-common.mjs","sources":["../../../projects/sentinel-common/src/model/date/date-range-form.ts","../../../projects/sentinel-common/src/model/forms/base-reactive-form.ts","../../../projects/sentinel-common/src/directives/s-let.directive.ts","../../../projects/sentinel-common/src/model/http/params/sentinel-params-merger.ts","../../../projects/sentinel-common/src/model/http/response-headers/response-header-content-disposition-reader.ts","../../../projects/sentinel-common/src/services/resource.service.ts","../../../projects/sentinel-common/src/services/resource-polling.service.ts","../../../projects/sentinel-common/src/services/paginated-elements/paginated-elements.service.ts","../../../projects/sentinel-common/src/services/paginated-elements/cursor-paginated-elements.service.ts","../../../projects/sentinel-common/src/services/paginated-elements/paginated-elements-polling.service.ts","../../../projects/sentinel-common/src/services/paginated-elements/cursor-paginated-elements-polling.service.ts","../../../projects/sentinel-common/src/services/paginated-elements/offset-paginated-elements.service.ts","../../../projects/sentinel-common/src/services/paginated-elements/offset-paginated-elements-polling.service.ts","../../../projects/sentinel-common/src/validators/sentinel-validators.ts","../../../projects/sentinel-common/src/public_api.ts","../../../projects/sentinel-common/src/sentinel-common.ts"],"sourcesContent":["import { AbstractControl, FormControl, FormGroup, ValidationErrors, ValidatorFn } from '@angular/forms';\nimport { DateRange } from './date-range';\n\nexport interface DateRangeFormModel {\n  from: FormControl<Date | null>;\n  to: FormControl<Date | null>;\n}\n\nexport class DateRangeForm {\n  formGroup: FormGroup<DateRangeFormModel>;\n\n  constructor(dateRange?: DateRange) {\n    this.formGroup = new FormGroup<DateRangeFormModel>(\n      {\n        from: new FormControl<Date | null>(dateRange?.from ?? null),\n        to: new FormControl<Date | null>(dateRange?.to ?? null),\n      },\n      { validators: dateOrderValidator },\n    );\n  }\n}\n\nexport const dateOrderValidator: ValidatorFn = (control: AbstractControl): ValidationErrors | null => {\n  let error = null;\n  if (control.get('from')?.value instanceof Date && control.get('to')?.value instanceof Date) {\n    const startTime = control.get('from')?.value as Date;\n    const endTime = control.get('to')?.value as Date;\n    if (startTime && endTime && startTime && startTime.valueOf() > endTime.valueOf()) {\n      error = { dateTimeOrder: true };\n    }\n  }\n  return error;\n};\n","import { AbstractControl, FormGroup } from '@angular/forms';\nimport { merge, Observable, Subject } from 'rxjs';\nimport { distinctUntilChanged, map, startWith } from 'rxjs/operators';\n\nexport abstract class BaseReactiveForm<\n  FormModel extends {\n    [K in keyof FormModel]: AbstractControl<unknown>;\n  },\n> {\n  formGroup: FormGroup<FormModel>;\n  dirtySubject$: Subject<boolean> = new Subject<boolean>();\n  dirty$: Observable<boolean>;\n  valid$: Observable<boolean>;\n\n  protected constructor(formGroup: FormGroup<FormModel>) {\n    this.formGroup = formGroup;\n    this.valid$ = this.formGroup.statusChanges.pipe(\n      map(() => this.formGroup.valid),\n      distinctUntilChanged(),\n      startWith(this.formGroup.valid),\n    );\n\n    const dirtyFromForm$ = this.formGroup.statusChanges.pipe(map(() => this.formGroup.dirty));\n    this.dirty$ = merge(dirtyFromForm$, this.dirtySubject$).pipe(distinctUntilChanged(), startWith(this.dirty));\n  }\n\n  get valid(): boolean {\n    return this.formGroup.valid;\n  }\n\n  get dirty(): boolean {\n    return this.formGroup.dirty;\n  }\n\n  set dirty(value: boolean) {\n    value ? this.formGroup.markAsDirty() : this.formGroup.markAsPristine();\n    this.dirtySubject$.next(value);\n  }\n\n  set isSaving(value: boolean) {\n    value ? this.formGroup.disable({ emitEvent: false }) : this.formGroup.enable({ emitEvent: false });\n  }\n}\n","import { Directive, Input, TemplateRef, ViewContainerRef } from '@angular/core';\n\ninterface SLetContext<T> {\n  sLet: T | null;\n}\n\n@Directive({\n  // eslint-disable-next-line @angular-eslint/directive-selector\n  selector: '[sLet]',\n  standalone: true,\n})\nexport class SLetDirective<T> {\n  private context: SLetContext<T> = { sLet: null };\n\n  constructor(viewContainer: ViewContainerRef, templateRef: TemplateRef<SLetContext<T>>) {\n    viewContainer.createEmbeddedView(templateRef, this.context);\n  }\n\n  @Input()\n  set sLet(value: T) {\n    this.context.sLet = value;\n  }\n}\n","import { HttpParams } from '@angular/common/http';\n\n/**\n * Util class merging multiple http params into one http params object\n */\nexport class SentinelParamsMerger {\n  /**\n   * Merges multiple http params into one http params object\n   * @param params list of http params object to be merged\n   */\n  static merge(params: HttpParams[]): HttpParams {\n    let resultParams = new HttpParams();\n    params.forEach((param) =>\n      param.keys().forEach((key) => {\n        const paramValue = param.get(key);\n        if (paramValue) {\n          resultParams = resultParams.set(key, paramValue);\n        }\n      }),\n    );\n    return resultParams;\n  }\n}\n","import { HttpResponse } from '@angular/common/http';\n\nexport class ResponseHeaderContentDispositionReader {\n  static getFilenameFromResponse(resp: HttpResponse<unknown>, defaultFilename: string): string {\n    const contentDispHeader = resp.headers.get('content-disposition');\n    if (!contentDispHeader) {\n      return defaultFilename;\n    }\n    const splitOnSeparator = defaultFilename.split(';');\n    if (splitOnSeparator.length <= 1) {\n      return defaultFilename;\n    }\n    const splitOnKeyword = splitOnSeparator[1].split('filename');\n    if (splitOnKeyword.length <= 1) {\n      return defaultFilename;\n    }\n    const splitOnEqualSign = splitOnKeyword[1].split('=');\n    if (splitOnEqualSign.length <= 1) {\n      return defaultFilename;\n    }\n    return splitOnEqualSign[1].trim();\n  }\n}\n","import { BehaviorSubject, Observable } from 'rxjs';\n\n/**\n * Holds resource state data in an observable.\n * Subscribe to resource$ to receive latest data updates.\n */\nexport abstract class ResourceService<T> {\n  /**\n   * True if server returned error response on the latest request, false otherwise\n   * Change internally in extending service. Client should subscribe to the observable\n   */\n  protected hasErrorSubject$: BehaviorSubject<boolean> = new BehaviorSubject(false);\n  /**\n   * True if server returned error response on the latest request, false otherwise\n   * @contract must be updated every time new data are received\n   */\n  hasError$: Observable<boolean> = this.hasErrorSubject$.asObservable();\n\n  /**\n   * True if response to the latest request was not yet received\n   * Change internally in extending service. Client should subscribe to the observable\n   */\n  protected isLoadingSubject$: BehaviorSubject<boolean> = new BehaviorSubject(false);\n  /**\n   * True if response to the latest request was not yet received\n   * @contract must be updated every time new data are received\n   */\n  isLoading$: Observable<boolean> = this.isLoadingSubject$.asObservable();\n\n  /**\n   * Resource data of generic type. Change internally in extending service.\n   * Client should subscribe to the observable\n   * @contract must be updated every time new data are received\n   */\n  protected resourceSubject$: BehaviorSubject<T | undefined> = new BehaviorSubject<T | undefined>(undefined);\n\n  /**\n   * Resource data of generic type. Change internally in extending service.\n   * Client should subscribe to the observable\n   * @contract must be updated every time new data are received\n   */\n  resource$: Observable<T | undefined> = this.resourceSubject$.asObservable();\n\n  abstract get(id: number | string): Observable<T | undefined>;\n}\n","import { ResourceService } from './resource.service';\nimport { merge, Observable, Subject, timer } from 'rxjs';\nimport { retryWhen, switchMap } from 'rxjs/operators';\n\n/**\n * Adds polling behaviour to resource service\n */\nexport abstract class ResourcePollingService<T> extends ResourceService<T> {\n  /**\n   * Observable triggering retry of polling after it was interrupted (e.g. by error)\n   */\n  protected retryPolling$: Subject<boolean> = new Subject<boolean>();\n\n  private pollPeriod: number;\n\n  protected constructor(pollPeriod = 5000) {\n    super();\n    this.pollPeriod = pollPeriod;\n    this.resource$ = merge(this.createPoll(), this.resourceSubject$.asObservable());\n  }\n\n  /**\n   * Performs necessary operations and updates state of the service.\n   * @contract Needs to update hasError subject and retry polling\n   * if it was previously interrupted\n   * @param params any other parameters required to update data in your concrete service\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected onManualResourceRefresh(...params: unknown[]): void {\n    if (this.hasErrorSubject$.getValue()) {\n      this.retryPolling$.next(true);\n    }\n    this.hasErrorSubject$.next(false);\n  }\n\n  /**\n   * @contract must update resource and hasErrorSubject\n   * Implement this to perform a refresh of the resource on polling period\n   */\n  protected abstract refreshResource(): Observable<T>;\n\n  /**\n   * Creates poll observable using a timer. You can extend the behaviour by piping the observable and applying\n   * RxJs operators on it (e.g. takeWhile to stop polling on specific conditions)\n   * @param dueTime optionally set a due time when the timer should start. By default it equals to the\n   * poll period as it is expected that the first request is made from the service or component\n   * using the service (to properly set up pagination and all other possible params like ids etc)\n   */\n  protected createPoll(dueTime: number = this.pollPeriod): Observable<T> {\n    return timer(dueTime, this.pollPeriod).pipe(\n      switchMap(() => this.refreshResource()),\n      retryWhen(() => this.retryPolling$),\n    );\n  }\n}\n","import { BehaviorSubject, Observable } from 'rxjs';\nimport { IPaginatedElements } from '@sentinel/common/pagination';\n\n/**\n * Contains subjects and observables typically used when handling paginated data.\n * Subscribe to resource$ to receive latest data updates.\n */\nexport abstract class PaginatedElementsService<T> {\n  protected constructor(pageSize = 10) {\n    this.resourceSubject$ = new BehaviorSubject(this.initSubject(pageSize));\n    this.resource$ = this.resourceSubject$.asObservable();\n  }\n\n  protected abstract initSubject(pageSize: number): IPaginatedElements<T>;\n\n  /**\n   * True if server returned error response on the latest request, false otherwise\n   * Change internally in extending service. Client should subscribe to the observable\n   */\n  protected hasErrorSubject$: BehaviorSubject<boolean> = new BehaviorSubject(false);\n  /**\n   * True if server returned error response on the latest request, false otherwise\n   * @contract must be updated every time new data are received\n   */\n  hasError$: Observable<boolean> = this.hasErrorSubject$.asObservable();\n\n  /**\n   * True if response to the latest request was not yet received\n   * Change internally in extending service. Client should subscribe to the observable\n   */\n  protected isLoadingSubject$: BehaviorSubject<boolean> = new BehaviorSubject(false);\n  /**\n   * True if response to the latest request was not yet received\n   * @contract must be updated every time new data are received\n   */\n  isLoading$: Observable<boolean> = this.isLoadingSubject$.asObservable();\n\n  /**\n   * Paginated resource containing pagination info and retrieved elements of generic type. Change internally in extending service.\n   * Client should subscribe to the observable\n   * @contract must be updated every time new data are received\n   */\n  protected resourceSubject$: BehaviorSubject<IPaginatedElements<T>>;\n\n  /**\n   * Paginated resource containing pagination info and retrieved elements of generic type. Change internally in extending service.\n   * Client should subscribe to the observable\n   * @contract must be updated every time new data are received\n   */\n  resource$: Observable<IPaginatedElements<T>>;\n}\n","import { PaginatedElementsService } from './paginated-elements.service';\nimport { CursorPagination, IPaginatedElements, PaginatedResource } from '@sentinel/common/pagination';\n\nexport abstract class CursorPaginatedElementsService<T> extends PaginatedElementsService<T> {\n  protected initSubject(pageSize: number): IPaginatedElements<T> {\n    return new PaginatedResource([], new CursorPagination(null, 0, pageSize, 0, null, null));\n  }\n}\n","import { merge, Observable, Subject, timer } from 'rxjs';\nimport { retryWhen, switchMap } from 'rxjs/operators';\nimport { PaginatedElementsService } from './paginated-elements.service';\nimport { IPaginatedElements, PaginationBaseEvent } from '@sentinel/common/pagination';\n\n/**\n * Adds polling behaviour to paginated elements service\n */\nexport abstract class PaginatedElementsPollingService<T> extends PaginatedElementsService<T> {\n  /**\n   * @contract Needs to be updated in onManualResourceRefresh method\n   * Last pagination used when requesting new data\n   */\n  protected lastPagination?: PaginationBaseEvent;\n\n  /**\n   * Observable triggering retry of polling after it was interrupted (e.g. by error)\n   */\n  protected retryPolling$: Subject<boolean> = new Subject<boolean>();\n\n  private pollPeriod: number;\n\n  protected constructor(defaultPaginationSize: number, pollPeriod: number) {\n    super(defaultPaginationSize);\n    this.pollPeriod = pollPeriod;\n    this.resource$ = merge(this.createPoll(), this.resourceSubject$.asObservable());\n  }\n\n  /**\n   * Performs necessary operations and updates state of the service.\n   * @contract Needs to update lastPagination attribute, hasError subject and retry polling\n   * if it was previously interrupted\n   * @param pagination new requested pagination\n   * @param params any other parameters required to update data in your concrete service\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected onManualResourceRefresh(pagination: PaginationBaseEvent, ...params: unknown[]): void {\n    this.lastPagination = pagination;\n    if (this.hasErrorSubject$.getValue()) {\n      this.retryPolling$.next(true);\n    }\n    this.hasErrorSubject$.next(false);\n  }\n\n  /**\n   * @contract must update resource and hasErrorSubject\n   * Implement this to perform a refresh of the resource on polling period\n   */\n  protected abstract refreshResource(): Observable<IPaginatedElements<T>>;\n\n  /**\n   * Creates poll observable using a timer. You can extend the behaviour by piping the observable and applying\n   * RxJs operators on it (e.g. takeWhile to stop polling on specific conditions)\n   * @param dueTime optionally set a due time when the timer should start. By default it equals to the\n   * poll period as it is expected that the first request is made from the service or component\n   * using the service (to properly set up pagination and all other possible params like ids etc)\n   */\n  protected createPoll(dueTime: number = this.pollPeriod): Observable<IPaginatedElements<T>> {\n    return timer(dueTime, this.pollPeriod).pipe(\n      switchMap(() => this.refreshResource()),\n      retryWhen(() => this.retryPolling$),\n    );\n  }\n}\n","import { PaginatedElementsPollingService } from './paginated-elements-polling.service';\nimport {\n  CursorPagination,\n  CursorPaginationEvent,\n  IPaginatedElements,\n  PaginatedResource,\n} from '@sentinel/common/pagination';\n\nexport abstract class CursorPaginatedElementsPollingService<T> extends PaginatedElementsPollingService<T> {\n  protected lastPagination?: CursorPaginationEvent;\n\n  protected initSubject(pageSize: number): IPaginatedElements<T> {\n    return new PaginatedResource<T>([], new CursorPagination(null, 0, pageSize, 0, null, null));\n  }\n}\n","import { PaginatedElementsService } from './paginated-elements.service';\nimport { IPaginatedElements, OffsetPagination, PaginatedResource } from '@sentinel/common/pagination';\n\nexport abstract class OffsetPaginatedElementsService<T> extends PaginatedElementsService<T> {\n  protected initSubject(pageSize: number): IPaginatedElements<T> {\n    return new PaginatedResource([], new OffsetPagination(0, 0, pageSize, 0, 0));\n  }\n}\n","import { PaginatedElementsPollingService } from './paginated-elements-polling.service';\nimport { IPaginatedElements, OffsetPagination, PaginatedResource } from '@sentinel/common/pagination';\n\nexport abstract class OffsetPaginatedElementsPollingService<T> extends PaginatedElementsPollingService<T> {\n  protected lastPagination?: OffsetPagination;\n\n  protected initSubject(pageSize: number): IPaginatedElements<T> {\n    return new PaginatedResource([], new OffsetPagination(0, 0, pageSize, 0, 0));\n  }\n}\n","import { AbstractControl, AsyncValidatorFn, ValidationErrors, ValidatorFn, Validators } from '@angular/forms';\n\nexport class SentinelValidators {\n  static noWhitespace = (control: AbstractControl): ValidationErrors | null => {\n    const isWhitespace = (control.value || '').trim().length === 0;\n    const isValid = !isWhitespace;\n    return isValid ? null : { whitespace: true };\n  };\n\n  static minDate = (minDate: Date): ValidatorFn => {\n    return (control: AbstractControl): ValidationErrors | null => {\n      const date = new Date(control.value);\n      if (minDate.getTime() < date.getTime()) {\n        return null;\n      } else {\n        return { minDate: { value: control.value, expected: minDate } };\n      }\n    };\n  };\n\n  static maxDate = (maxDate: Date): ValidatorFn => {\n    return (control: AbstractControl): ValidationErrors | null => {\n      const date = new Date(control.value);\n      if (maxDate.getTime() > date.getTime()) {\n        return null;\n      } else {\n        return { maxDate: { value: control.value, expected: maxDate } };\n      }\n    };\n  };\n\n  static min = (min: number): ValidatorFn => {\n    return Validators.min(min);\n  };\n  static max = (max: number): ValidatorFn => {\n    return Validators.max(max);\n  };\n\n  static required = (control: AbstractControl): ValidationErrors | null => {\n    return Validators.required(control);\n  };\n\n  static requiredTrue = (control: AbstractControl): ValidationErrors | null => {\n    return Validators.requiredTrue(control);\n  };\n\n  static email = (control: AbstractControl): ValidationErrors | null => {\n    return Validators.email(control);\n  };\n\n  static minLength = (minLength: number): ValidatorFn => {\n    return Validators.minLength(minLength);\n  };\n\n  static maxLength = (maxLength: number): ValidatorFn => {\n    return Validators.maxLength(maxLength);\n  };\n\n  static pattern = (pattern: string | RegExp): ValidatorFn => {\n    return Validators.pattern(pattern);\n  };\n\n  static nullValidator = (control: AbstractControl): ValidationErrors | null => {\n    return Validators.nullValidator(control);\n  };\n\n  static compose = (validators: (ValidatorFn | null | undefined)[]): ValidatorFn | null => {\n    return Validators.compose(validators);\n  };\n  static composeAsync = (validators: (AsyncValidatorFn | null)[]): AsyncValidatorFn | null => {\n    return Validators.composeAsync(validators);\n  };\n}\n","/*\n * Public API Surface of sentinel-common\n */\n\nexport * from './model/date/date-range';\nexport * from './model/date/date-range-form';\n\nexport * from './model/forms/base-reactive-form';\n\n// DIRECTIVES\nexport * from './directives/s-let.directive';\n// MODEL\nexport * from './model/types/router-link-commands';\nexport * from './model/http/params/sentinel-params-merger';\nexport * from './model/http/response-headers/response-header-content-disposition-reader';\n\n// PIPES\n\n// SERVICES\nexport * from './services/resource.service';\nexport * from './services/resource-polling.service';\nexport * from './services/paginated-elements/cursor-paginated-elements.service';\nexport * from './services/paginated-elements/cursor-paginated-elements-polling.service';\nexport * from './services/paginated-elements/offset-paginated-elements.service';\nexport * from './services/paginated-elements/offset-paginated-elements-polling.service';\n\n// VALIDATORS\nexport * from './validators/sentinel-validators';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":"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"}