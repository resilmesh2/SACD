<h1>Subnets</h1>
<!-- Search bar -->
<ng-container *ngIf="dataLoading">
  <mat-spinner></mat-spinner>
</ng-container>
<ng-container *ngIf="errorResponse">
  <p class="error">
    <strong>Error fetching data from GraphQL API.</strong><br /><span>Error message: {{ errorResponse }}</span>
  </p>
</ng-container>
<ng-container *ngIf="emptyResponse">
  <p class="no-data">
    No available data for 
  </p>
</ng-container>
<ng-container *ngIf="dataLoaded && !dataLoading && !emptyResponse">
  <div class="section">
    <!-- <h3>List of subnets</h3> -->
    <!-- Table with results -->
    <table mat-table [dataSource]="dataSource" matSort>
      <!-- Subnet note column -->
      <ng-container matColumnDef="note">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Subnet</th>
        <td mat-cell *matCellDef="let row">
          <span class="ip-address">{{ row.note }}</span>
        </td>
      </ng-container>
      <!-- Subnet range column -->
      <ng-container matColumnDef="range">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Range</th>
        <td mat-cell *matCellDef="let row">
          <span class="ip-address">{{ row.range }}</span>
        </td>
      </ng-container>

      <!-- Subnet orgUnits column -->
      <ng-container matColumnDef="org_units">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Organizational Units</th>
        <td mat-cell *matCellDef="let row">
          <span class="ip-address">{{ row.org_units.join(', ') }}</span>
        </td>
      </ng-container>

      <!-- Subnet contacts column -->
      <ng-container matColumnDef="contacts">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Contacts</th>
        <td mat-cell *matCellDef="let row">
          <span class="ip-address">{{ row.contacts.join(', ') }}</span>
        </td>
      </ng-container>

      <!-- Parent subnet column -->
      <ng-container matColumnDef="parent_subnet">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Part of</th>
        <td mat-cell *matCellDef="let row">
          <span class="ip-address">{{ row.parent_subnet?.range }}</span>
        </td>
      </ng-container>

      <!-- Domain name Column -->
      <!-- <ng-container matColumnDef="domainName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Domain name</th>
        <td mat-cell *matCellDef="let row">{{ row.domainName }}</td>
      </ng-container> -->

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

      <!-- Row shown when there is no matching data. -->
      <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell" colspan="4">No data matching the CVE code</td>
      </tr>
    </table>
    <mat-paginator [pageSize]="25" [pageSizeOptions]="[25, 50, 200, 500]"></mat-paginator>
  </div>
</ng-container>
