<div class="issue-details-container">
  <button (click)="goBack()"><-- Issues</button>
  <span>{{ issueName }}</span>
</div>

<div class="issue-header">
  <h1>{{ issueName }}</h1>
</div>

<div class="issue-details">
  <div class="issue-info">
    <span><strong>Severity:</strong> {{ issueSeverity }}</span>
    <span><strong>Status:</strong> {{ issueStatus }}</span>
  </div>
  <div class="issue-impact">
    <span><strong>Impact:</strong> {{ issueImpact }}</span>
  </div>
</div>
<!-- Overall element visible only when data is loaded, and no errors or empty response -->
<div *ngIf="dataLoaded && !emptyResponse && !errorResponse && !dataLoading">
  <div>
    <span><strong>Total Occurrences:</strong> {{ totalOccurrences }} </span>
  </div>

  <!-- You can add more elements here if needed within this condition -->
  <table mat-table [dataSource]="dataSource" class="mat-table full-width-table">
    <!-- Affected Asset Column -->
    <ng-container matColumnDef="affectedAsset">
      <th mat-header-cell *matHeaderCellDef> Affected Asset </th>
      <td mat-cell *matCellDef="let issueDetail"> {{ issueDetail.affectedAsset }} </td>
    </ng-container>

    <!-- Description Column -->
    <ng-container matColumnDef="description">
      <th mat-header-cell *matHeaderCellDef> Description </th>
      <td mat-cell *matCellDef="let issueDetail"> {{ issueDetail.description }} </td>
    </ng-container>

    <!-- Software Column -->
    <ng-container matColumnDef="software">
      <th mat-header-cell *matHeaderCellDef> Software Version </th>
      <td mat-cell *matCellDef="let issueDetail"> {{ issueDetail.software }} </td>
    </ng-container>

    <!-- Vulnerability Count Column -->
    <ng-container matColumnDef="vulnerabilityCount">
      <th mat-header-cell *matHeaderCellDef> Vulnerability Occurrences </th>
      <td mat-cell *matCellDef="let issueDetail"> {{ issueDetail.vulnerabilityCount }} </td>
    </ng-container>

    <!-- Add the header and row definitions -->
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
    <mat-paginator [pageSize]="30" [pageSizeOptions]="[30, 60, 90]" showFirstLastButtons></mat-paginator>
</div>

<!-- Error message if there's an error -->
<div *ngIf="errorResponse" class="error-message">
  <span>{{ errorResponse }}</span>
</div>

<!-- Message if the response is empty -->
<div *ngIf="emptyResponse" class="empty-message">
  <span>No data available for the selected issue.</span>
</div>

<!-- Loading message or spinner if data is loading -->
<div *ngIf="dataLoading" class="loading-message">
  <mat-spinner></mat-spinner>
  <span>Loading vulnerable assets...</span>
</div>
